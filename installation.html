<!DOCTYPE HTML>
<html>

<head>
  <title>MDsrv</title>
  <meta name="description" content="MDsrv - a web-based tool developed to provide easy and quick on-line access to molecular dynamics (MD) simulations, channeling MD trajectories through a web server using a powerful web application (NGL viewer) to visualize them." />
  <meta name="keywords" content="MDsrv, MD simulation, visualization, web server, NGL" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <!-- modernizr enables HTML5 elements and feature detects -->
  <script type="text/javascript" src="js/modernizr-1.5.min.js"></script>
  <script src="js/jquery.js"></script>
  <script> 
  $(function(){
    $("#header").load("include/header.html");
    $("#side").load("include/side.html"); 
    $("#side-install").load("include/side-install.html"); 
    $("#footer").load("include/footer.html"); 
  });
  </script> 
</head>

<body>
  <div id="main">
    <div id="header"></div>
    <div id="site_content">
			<div id="side-install"></div>
      <div class="content">
				<h1>Installation</h1>
				
				<p align=justify>Installation and deployment is shown in short below (for Linux and MacOS system) and in more detail in the <a href="deployment.html">Install & Deployment chapter</a>. The deployment via apache2 and mod-wsgi is tested for debian-based Linux systems. A guide for windows installation (tested only for conda) and deployment can be found <a href="windows.html">here</a>.</p>
				
<h2><a id="quickinstall" class="anchor" target="_blank" href="#quickinstall" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick installation</h2>



<p align=justify>To deploy the MDsrv, just follow these 8 steps (for debian-based Linux systems).</p>
<ol><li>Install MDsrv
	<ul><li>via PyPi:
	<pre><code>pip install mdsrv
</code></pre>
</li>
<li>via conda:
	<pre><code>conda config --add channels conda-forge</code></pre>
	<pre><code>conda install -c ngl mdsrv</code></pre>
</li><li>dependencies (included in the installation): <em>mdtraj (incl. cython, numpy, scipy), setuptools, flask</em>
</li></ul>
</li>
<li><p align=justify>Test your installation:</p> 
  <p align=justify>To test your installation, execute <em>mdsrv path/to/structure-file path/to/trajectory</em> in your terminal. A new browser window will open. If nothing is shown, please just reload the website. Don't forget to play your trajectory.</p>

<p align=justify>If the executable 'mdsrv' cannot be found, you probably have to adjust your PATH variable, e.g.: <code>export PATH=$PATH:~/.local/bin</code></p>
<br>
  <p align=justify>There are three ways of installing, as root (sudo), as 'normal' user or within an virtual environment. Note that the installations paths will differ. When installing as 'normal' user the path will be (under Linux) '/home/USER/.local/lib/python3.8/site-packages ' while as root the installation will be under e.g. '/usr/lib/python3.8/'. You have to adjust the variable 'python-path' in the apache2 config (/etc/apache2/sites-available/000-default.conf) accordingly.
</p>
</li>
</li>
<li><p align=justify>Install Apache2 and mod-wsgi:</p> 
	<pre><code>sudo apt-get install apache2 libapache2-mod-wsgi</code></pre>
<br>
  <p align=justify>If you're using python3, please install <pre><code>sudo apt-get install apache2 libapache2-mod-wsgi-py3</code></pre></p>
<br>
  Then activate wsgi with <code>a2enmod wsgi</code>
</li><li>
 <p align=justify>Add the content of <a target="_blank" href="data/apache.config">apache.config</a> into <em>/etc/apache2/sites-available/000-default.conf</em> or replace this file.<br>
 <strong>Important:</strong> Adjust the <em>user</em> and <em>group</em> according to your environment settings and set the <em>python-path</em> or remove it. An example for <em>user</em> and <em>group</em> would be your system name, found on Linux with <em>whoami</em>. Make sure to use absolut paths. For more information, please check the more detailed <a target="_blank" href="deployment.html">documentation</a>.</p>
</li><li>
<p>Copy <a target="_blank" download="mdsrv.html" href="data/mdsrv.html">mdsrv.html</a> into the folder <em>/var/www/html/</em>. Make sure the right rights are set (<code>chmod +r /var/www/html/mdsrv.html</code>).</p>
</li><li>
<p align=justify>Save and adjust the configuration file <a target="_blank" download="app.cfg" href="data/app.cfg">app.cfg</a>. The content and setting is explained <a href="configuration.html">here</a>.</p>
</li><li>
<p align=justify>Place <a target="_blank" download="mdsrv.wsgi" href="data/mdsrv.wsgi">mdsrv.wsgi</a> into <em>/var/www/mdsrv/mdsrv.wsgi</em>. Add the path of the configuration file (<a target="_blank" download="app.cfg" href="data/app.cfg">app.cfg</a>) into the <a target="_blank" download="mdsrv.wsgi" href="data/mdsrv.wsgi">mdsrv.wsgi</a> file including the name of the file (<em>APP_CFG = '/home/username/important/app.cfg'</em>).</p>
</li><li>
	<p align=justify>Restart the apache server (additional to whenever the <em>app.cfg</em> file is changed):</p>
<pre><code>sudo service apache2 restart</code></pre>
</li><li>
	<p align=justify>Access the MDsrv/NGL GUI including your simulations via:</p>
	<pre><code>http://localhost/mdsrv.html</code></pre>
</li>
</ol>

<p align=justify><strong>Additional dependencies:</strong> You can speed up your trajectories by installing MDAnalysis (Please be aware that this package is large). MDsrv will automaticially detect when MDAnalysis is present and will use it prior to mdtraj. For installation instructions please see the MDAnalysis <a target="_blank" href="https://www.mdanalysis.org/MDAnalysisTutorial/installation.html">website</a>. </p>

<h2><a id="operatingsys" class="anchor" target="_blank" href="#operatingsys" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Operating systems</h2>
<p align=justify>The MDsrv has been tested and can be installed on Linux,  Mac OS and Windows. Deployment is excessively tested for Debian-based Linux systems.</p>
<p align=justify>The deployed NGL sessions can be viewed on every operating system and browser which supports WebGL.</p>


<h2><a id="toy" class="anchor" target="_blank" href="#toy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Toy example to test your installation & deployment</h2>
<p align=justify>Find here a quick guide to setup your first mdsrv session:</p>

<ol><li>Go to <a target="_blank" href="https://github.com/nglviewer/mdsrv/tree/master/data">https://github.com/nglviewer/mdsrv/tree/master/data</a></li>

<li>Download <em>script.ngl</em>, <em>md_1u19.gro</em>, <em>md_1u19.xtc</em> into e.g. <em>~/example/</em></li>
<br>
<li>In app.cfg, add the path where <em>script.ngl</em> is located, e.g.:
<br>
<pre><code>DATA_DIRS={
"mytest" : os.path.abspath( "/home/USER/example/"),
}</code></pre></li>
<br>
<li>In script.ngl you have to change the basePath variable, e.g.:
<pre><code>var basePath = "mytest/"</code></pre></li>
<br>
<li>Restart apache2: <code>service apache2 restart</code></li>
<br>
<li>In your browser call URL:
<a target="_blank" href="http://localhost/mdsrv.html?load=file://mytest/script.ngl">http://localhost/mdsrv.html?load=file://mytest/script.ngl</a></li>
</p>


<p align=justify>Troubles? Get information how to do this, inspect the <a href="deployment.html">deployment guide</a>.</p>

<h1><a id="more" class="anchor" href="#more" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More</h1>

<p align=justify>If you have any <strong>questions</strong>, found some <strong>bugs</strong>, or want to report
<strong>enhancement requests</strong> use the <a target="_blank" href="https://github.com/arose/mdsrv/issues">Issue Tracker</a>, use the <a href="contact.html">contact formular</a> or write a mail to
<a href="mailto:johanna.tiemann@gmail.com">johanna.tiemann@gmail.com</a> or
<a href="mailto:alexander.rose@weirdbyte.de">alexander.rose@weirdbyte.de</a>.</p>

<p>Please give us <strong>feedback</strong>!</p>

      </div>
    </div>
    <div id="scroll">
      <a title="Scroll to the top" class="top" href="#"><img src="images/top.png" alt="top" /></a>
    </div>
  <div id="footer"></div>
  </div>
</body>
</html>
